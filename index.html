<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login Page</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body
    class="bg-gradient-to-br from-pink-100 via-pink-200 to-pink-300 min-h-screen flex items-center justify-center p-4">

    <!-- Main Container -->
    <div
        class="w-full max-w-screen-xl bg-white/30 backdrop-blur-md rounded-3xl flex flex-col md:flex-row shadow-2xl h-auto md:h-[93vh] border  overflow-hidden border-white/40">

        <!-- Sidebar -->
        <div
            class="w-full md:w-5 bg-orange-400 rounded-t-3xl md:rounded-l-3xl md:rounded-tr-none flex md:flex-col items-center justify-center md:justify-start py-4 md:py-6 gap-6 shadow-inner">


        </div>

        <!-- Content -->
        <div
            class="flex-1 bg-gradient-to-br from-teal-600 to-teal-800 p-4 md:p-6 rounded-b-3xl md:rounded-r-3xl md:rounded-bl-none overflow-hidden">

            <!-- Tab 0 -->
            <!-- Role Selection Tab -->
            <div class="p-6" id="role-select-tab">
                <h2 class="text-3xl font-bold text-white mb-4 text-center">Select Your Role</h2>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-5xl mx-auto">
                    <!-- Voter -->
                    <div onclick="showTab('voter-login-tab')"
                        class="cursor-pointer bg-white shadow-xl rounded-2xl p-8 flex flex-col items-center justify-center transition-transform hover:scale-105 hover:shadow-2xl">
                        <img src=".\pic\1.png" alt="Voter" class="w-40 h-40 mb-4">
                        <h3 class="text-xl font-semibold text-gray-700">Voter</h3>
                        <p class="text-sm text-gray-500 mt-2 text-center">Log in to cast your vote</p>
                    </div>

                    <!-- Candidate -->
                    <div onclick="showTab('candidate-login-tab')"
                        class="cursor-pointer bg-white shadow-xl rounded-2xl p-8 flex flex-col items-center justify-center transition-transform hover:scale-105 hover:shadow-2xl">
                        <img src=".\pic\2.png" alt="Candidate" class="w-40 h-40 mb-4">
                        <h3 class="text-xl font-semibold text-gray-700">Candidate</h3>
                        <p class="text-sm text-gray-500 mt-2 text-center">Manage your campaign and view results</p>
                    </div>

                    <!-- Officer -->
                    <div onclick="showTab('officer-login-tab')"
                        class="cursor-pointer bg-white shadow-xl rounded-2xl p-8 flex flex-col items-center justify-center transition-transform hover:scale-105 hover:shadow-2xl">
                        <img src=".\pic\3.png" alt="Officer" class="w-40 h-40 mb-4">
                        <h3 class="text-xl font-semibold text-gray-700">Officer</h3>
                        <p class="text-sm text-gray-500 mt-2 text-center">Manage booths and authorize operations</p>
                    </div>
                </div>
            </div>
            <script>
                function showTab(tabId) {
                    const tabs = ['role-select-tab', 'voter-login-tab', 'candidate-login-tab', 'officer-login-tab'];
                    tabs.forEach(id => {
                        const tab = document.getElementById(id);
                        if (tab) {
                            tab.style.display = (id === tabId) ? 'block' : 'none';
                        }
                    });
                }
            </script>




            <!-- Voter Login Tab -->
            <div id="voter-login-tab" class="hidden p-6">
                <h2 class="text-2xl font-bold text-center mb-6 text-white">Voter Login</h2>
                <div class="max-w-md mx-auto bg-white p-8 rounded-2xl shadow-xl space-y-2">
                    <input id="voter-id" type="text" placeholder="Enter ID"
                        class="w-full px-4 py-3 border rounded-xl" />
                    <input id="voter-passcode" type="text" placeholder="Enter Passcode"
                        class="w-full px-4 py-3 border rounded-xl" />
                    <button onclick="handleLogin('voter')"
                        class="w-full bg-pink-500 text-white py-3 rounded-xl">Login</button>
                    <button onclick="showTab('role-select-tab')" class="w-full text-sm text-gray-500 mt-2">←
                        Back</button>
                </div>
            </div>

            <!-- Candidate Login Tab -->
            <!-- Candidate Login Tab -->
            <div id="candidate-login-tab" class="hidden p-6">
                <h2 class="text-2xl font-bold text-center mb-6 text-white">Candidate Login</h2>
                <div class="max-w-md mx-auto bg-white p-8 rounded-2xl shadow-xl space-y-2">
                    <input id="candidate-id" type="text" placeholder="Candidate ID"
                        class="w-full px-4 py-3 border rounded-xl" />
                    <input id="candidate-passcode" type="text" placeholder="Passcode"
                        class="w-full px-4 py-3 border rounded-xl" />
                    <button onclick="handleLogin('candidate')"
                        class="w-full bg-blue-500 text-white py-3 rounded-xl">Login</button>
                    <button onclick="showTab('role-select-tab')" class="w-full text-sm text-gray-500 mt-2">←
                        Back</button>
                </div>
            </div>


            <!-- Officer Login Tab -->
            <div id="officer-login-tab" class="hidden p-6">
                <h2 class="text-2xl font-bold text-center mb-6 text-white">Officer Login</h2>
                <div class="max-w-md mx-auto bg-white p-8 rounded-2xl shadow-xl space-y-2">
                    <input id="officer-id" type="email" placeholder="Email"
                        class="w-full px-4 py-3 border rounded-xl" />
                    <input id="officer-passcode" type="password" placeholder="Admin Code"
                        class="w-full px-4 py-3 border rounded-xl" />
                    <button onclick="handleLogin('officer')"
                        class="w-full bg-green-500 text-white py-3 rounded-xl">Login</button>
                    <button onclick="showTab('role-select-tab')" class="w-full text-sm text-gray-500 mt-2">←
                        Back</button>
                </div>
            </div>

            <!-- Tab Switcher Script -->
            <script>
                function showTab(tabId) {
                    const tabs = ['role-select-tab', 'voter-login-tab', 'candidate-login-tab', 'officer-login-tab'];
                    tabs.forEach(id => {
                        document.getElementById(id).style.display = (id === tabId) ? 'block' : 'none';
                    });
                }
            </script>


        </div>
    </div>


    <!-- Include Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js"></script>


    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
        import { getFirestore, collection, query, where, getDocs } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBsqxp46x8mwXRpThRdpxsskRM1ie4PNCg",
            authDomain: "vote-edb06.firebaseapp.com",
            projectId: "vote-edb06",
            storageBucket: "vote-edb06.appspot.com",
            messagingSenderId: "916721565065",
            appId: "1:916721565065:web:2a451c1b45173d8b127558",
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        window.handleLogin = async function (role) {
            const id = document.getElementById(`${role}-id`).value.trim();
            const passcode = document.getElementById(`${role}-passcode`).value.trim();

            const q = query(
                collection(db, `${role}s`),
                where("id", "==", id),
                where("passcode", "==", passcode)
            );

            const snapshot = await getDocs(q);

            if (!snapshot.empty) {
                localStorage.setItem("userId", id);        // Save candidate ID
                localStorage.setItem("userRole", role);    // Optional: save role
                window.location.href = `${role}-dashboard.html`;
            } else {
                alert("Invalid ID or Passcode");
            }

        };
    </script>



</body>

</html>
